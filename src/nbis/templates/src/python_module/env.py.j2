# File generated by nbis-admin {{ version }}
# Do not edit this file!
"""Environment for {{ python_module }}"""

import os
import pathlib
import sys

import click

from {{ python_module }}.config import Config

try:
    from dotenv import dotenv_values
except ImportError:
    pass

from . import __version__


class Environment:
    """Environment for {{ python_module }}"""

    def __init__(self):
        self.verbose = False
        self.home = pathlib.Path(os.getcwd())
        self.debug = False
        self.dry_run = False
        self.version = __version__
        self.config = Config(data={"project_name": "{{ python_module }}"})
        try:
            self.dotenv = dotenv_values(self.home / ".env")
        except NameError:
            self.dotenv = {}

    def log(self, msg, *args):
        """Logs a message"""
        if args:
            msg %= args
        click.echo(msg, file=sys.stderr)

    def vlog(self, msg, *args):
        """Logs a message to stderr"""
        if self.verbose:
            self.log(msg, *args)
